(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):(global=typeof globalThis!=="undefined"?globalThis:global||self,global.Modal=factory())})(this,function(){"use strict";let defaultStyleApplied=false;const setDefaultStyleApplied=v=>defaultStyleApplied=v;var orCall=Function.prototype.call;function Chain(o){const pChain=Object.assign(Object.create(Chain.prototype),o?.__pr0t0__,o),chain=o?.__init__||function(){return this},prx=new Proxy(chain,Object.assign({apply:function(trgt,that,args){return orCall.call(trgt,prx,...args)},get:function(trgt,prop,receiver){if(prop==="__self__"){return trgt}else if(prop==="__proxy__"){return prx}return trgt[prop]?.bind?.(prx)??trgt[prop]}},o?.__handler__));chain.__proxy__=prx;chain.__origin__=o;Object.setPrototypeOf(chain,pChain);return prx}Chain.prototype=Object.create(Function.prototype);Chain.tagify=({delim=" ",strTransform=str=>str.trim(),valTransform=(thisArg,strings,stringsTransformed)=>(val,index,vals)=>typeof val==="function"?val({thisArg:thisArg,self:val,index:index,values:vals,strings:strings,stringsTransformed:stringsTransformed}):val}={})=>f=>function(...args){if(args?.[0]?.raw&&Object.isFrozen(args[0])){const strs=args[0].map(strTransform),vals=args.slice(1).map(valTransform(this,args[0],strs));for(let i=0,fields,strs_i,spread,len=vals.length;i<len;++i,spread=0){strs_i=strs[i];if(strs_i.slice(-3)==="..."){strs_i=strs_i.slice(0,-3);spread=1}fields=strs_i.split(delim).filter(d=>d);switch((spread<<1)+(fields.length>1)){case 0:this[fields[0]](vals[i]);break;case 1:this[fields[0]](fields[1],vals[i]);break;case 2:this[fields[0]](...vals[i]);break;case 3:this[fields[0]](fields[1],...vals[i]);break}}return this}return f?.call?.(this,...args)};Chain.lambda=f=>function(...args){f?.call?.(...args);return this};const ch=new Chain({__init__:Chain.tagify({strTransform:str=>str.trim().replace(/^\|>/,"pipe").replace(/^\$>/,"data").replace(/^%>/,"filter").replace(/^\*>/,"crt").replace(/^&>/,"each").replace(/^>>/,"set").replace(/->/gi,"invoke").replace(/=>/gi,"runtime").replace(/^x>/gi,"exec").replace(/^[+]>/gi,"append")})(function(...args){if(args.length<=1){this.selected=args[0];this.selectedStyle=this.selected.style;return this}return this[args[0]](...args.slice(1))}),data:function(data){if(data===void 0){return this.lastOp=this.__data__}this.lastOp=this.__data__=data;this.dataRoot=this.selected;return this},datum:function(acc,trgt){const that=this,idxs=[];let ndx=this.getIdx(acc,trgt,true),currNode=ndx.node;if(!this.dataRoot.contains(currNode)){return void 0}else if(this.dataRoot===currNode){return this.__data__}while(currNode!==this.dataRoot){idxs.push(ndx);if(acc instanceof Function){trgt=currNode.parentNode.parentNode}else{acc=currNode.parentNode}ndx=this.getIdx(acc,trgt);currNode=ndx.node}return function(f=function(idxs){let datum=that.__data__;for(let i=0,l=idxs.length;i<l;++i){datum=datum[idxs[i].index]}return datum}){return f(idxs.reverse())}},getIdx:function(acc,trgt,useFilter=false){let pNode,children,index,node,findIndex=0;if(acc instanceof Function){pNode=trgt||this.selected;findIndex=1}else if(acc instanceof Node){pNode=acc.parentNode}else{pNode=this.selected?.parentNode}children=Array.from(pNode?.children??{length:0}).filter(d=>!useFilter||this.__filter__(d,"getIdx"));index=children[findIndex?"findIndex":"indexOf"](acc??this.selected);node=children[index];return{node:node,index:index}},filter:function(f=(d,op)=>d){this.__filter__=f;return this},__filter__:(d,op)=>d,set:function(k,v){if(k instanceof Array){if(k[0]instanceof Array){this.lastOp=k.map(([k,v])=>{this.set(k,v);return v});return this}[k,v]=k}this.selected[k]=this.lastOp=v;return this},get:function(k){if(k instanceof Array){return this.lastOp=k.map(_k=>this.selected[_k])}return this.lastOp=this.selected[k]},call:function(a,...args){this.lastOp=this.selected[a].apply(this.selected,args);return this},invoke:function(...args){return this.lastOp=this(...args)},runtime:function(f,...args){this.lastOp=f.apply(this,args);return this},apply:function(a,args){this.lastOp=this.selected[a].apply(this.selected,args);return this},gatr:function(attr){if(attr instanceof Array){return this.lastOp=attr.map(k=>this.gatr(k))}return this.lastOp=this.selected.getAttribute(attr)},gatrNS:function(attr,namespace){if(attr instanceof Array){return this.lastOp=attr.map(([k,ns])=>this.gatrNS(k,ns))}return this.lastOp=this.selected.getAttributeNS(namespace,attr)},satr:function(attr,val){if(attr instanceof Array){return this.lastOp=attr.map(([k,v])=>{this.satr(k,v);return v})}this.selected.setAttribute(attr,this.lastOp=val);return this},satrNS:function(attr,val,namespace){if(attr instanceof Array){return this.lastOp=attr.map(([k,v,n])=>{this.satrNS(k,v,n);return v})}this.selected.setAttributeNS(namespace,attr,this.lastOp=val);return this},unwrap:function(v){if(v instanceof Function){if(v.length===2){v=v.call(this,this.datum()(),this.dindex()())}else if(v.length===1){v=v.call(this,this.datum()())}else{v=v.call(this)}}this.lastOp=v;return this},style:function(k,v){if(k instanceof Array){this.lastOp=k.map(([k,v])=>{return this.unwrap(v).rPipe("style",k).lastOp})}else{this.selectedStyle.setProperty(k,this.lastOp=this.unwrap(v).lastOp)}return this},pipe:function(command,...args){args=args.flat();this[command].apply(this,[this.lastOp,...args]);return this},rPipe:function(command,...args){args=args.flat();this[command].apply(this,[...args,this.lastOp]);return this},crt:function(tagName,count=1){if(tagName instanceof Array){this.lastOp=tagName.map(d=>document.createElement(d))}else{this.lastOp=Array.from({length:count}).map(d=>document.createElement(tagName))}return this},crtText:function(data,count=1){if(data instanceof Array){this.lastOp=data.map(d=>document.createTextNode(d))}else{this.lastOp=Array.from({length:count}).map(d=>document.createTextNode(data))}return this},crtFragment:function(count=1){this.lastOp=Array.from({length:count}).map(d=>document.createDocumentFragment());return this},append:function(els){(this.lastOp=els).forEach(d=>this.selected.appendChild(d));return this},sappend:function(els){let lastEl;(this.lastOp=els).forEach(d=>lastEl=this.selected.appendChild(d));return this(lastEl)},shift:function(els){(this.lastOp=els).forEach(d=>this.selected.insertBefore(d,this.selected.firstElementChild));return this},prepend:function(els){(this.lastOp=els).forEach(d=>this.selected.insertBefore(d,this.selected.firstElementChild));return this},first:function(){return this(this.lastOp=this.selected.firstElementChild)},last:function(){return this(this.lastOp=this.selected.lastElementChild)},prev:function(){return this(this.lastOp=this.selected.previousElementSibling)},next:function(){return this(this.lastOp=this.selected.nextElementSibling)},pop:function(){if(this.selected.children.length){this.lastOp=this.selected.removeChild(this.selected.lastElementChild)}return this},rm:function(els,reverse){if(typeof els?.[0]==="string"){let list=Array.from(this.selected.children).filter(d=>this.__filter__(d,"rm")),listLen=list.length,elsLen=els.length;if(reverse){list=list.reverse()}for(let i=0,j=0;i<listLen&&j<elsLen;++i){let node=list[i];if(node.parentNode&&node.matches(els[j])){this.selected.removeChild(node);++j;i=-1}else if(i===listLen-1){++j;i=-1}}}else{els.forEach(node=>node&&this.selected.contains(node)&&this.selected.removeChild(node))}this.lastOp=els;return this},on:function(evt,f,opts={}){let evtName,evtNS,wm,ns,ev,listener=this.lastOp=f;if(evt.includes("@",1)){if(!this.__eventMap__){this.__eventMap__=new WeakMap}wm=this.__eventMap__;[evtName,evtNS]=evt.split("@");if(!wm.has(this.selected)){wm.set(this.selected,new Map)}ns=wm.get(this.selected);if(!ns.has(evtNS)){ns.set(evtNS,new Map)}ev=ns.get(evtNS);if(!ev.has(evtName)){ev.set(evtName,new Map)}ev.get(evtName).set(listener,opts)}evt=evtName??evt;(opts.trgt??this.selected).addEventListener(evt,listener,opts);return this},off:function(evt,f,opt){let[evtName,evtNS]=evt.split("@");let temp;switch((!!evtName<<1)+(!!evtNS<<0)){case 0:this.lastOp=null;break;case 1:(temp=this.__eventMap__.get(this.selected)).get(evtNS)?.forEach((listeners,evtStr,thisMap)=>listeners.forEach((_opt,_f,thatMap)=>{this.lastOp=_f;this.selected.removeEventListener(evtStr,_f,_opt);thatMap.delete(_f)}));temp.delete(evtNS);break;case 2:this.selected.removeEventListener(evt,f,opt);break;case 3:this.__eventMap__.get(this.selected).forEach((evtMap,_evtNS,thisMap)=>{if(evtNS!==_evtNS){return}evtMap.forEach((listeners,evtStr,thatMap)=>{if(evtStr===evtName){listeners.forEach((_opt,_f,thereMap)=>{this.lastOp=_f;this.selected.removeEventListener(evtStr,_f,_opt);thereMap.delete(_f)})}})})}return this},each:function(f){const oSel=this.selected;(this.lastOp=Array.from(this.selected.children)).filter(d=>this.__filter__(d,"each")).forEach((d,i,a)=>{f.call(this,d,i,a)},this);return this(oSel)},exec:function(f,...args){this.lastOp=f.apply(this,args);return this},up:function(){return this(this.lastOp=this.selected.parentNode)},addClass:function(cls,trgt){trgt=trgt||this.selected;if(typeof cls==="function"){cls=cls.call(this)}if(cls instanceof Array){trgt.classList.add(...cls)}else{trgt.classList.add(cls)}this.lastOp=cls;return this},rmClass:function(cls,trgt){trgt=trgt||this.selected;if(typeof cls==="function"){cls=cls.call(this)}if(cls instanceof Array){trgt.classList.remove(...cls)}else{trgt.classList.remove(cls)}this.lastOp=cls;return this},toggleClass:function(cls,force,trgt){trgt=trgt||this.selected;if(typeof cls==="function"){cls=cls.call(this)}if(cls instanceof Array){cls.forEach(t=>trgt.classList.toggle(t,force))}else{trgt.classList.toggle(cls,force)}this.lastOp=cls;return this},replace:function(cls,nToken,trgt){trgt=trgt||this.selected;if(typeof cls==="function"){cls=cls.call(this)}if(cls instanceof Array){cls.forEach(([oToken,nToken])=>trgt.classList.replace(oToken,nToken))}else{trgt.classList.replace(cls,nToken)}this.lastOp=cls;return this},stash:function(v,...args){if(!this.__stash){this.__stash=[]}if(typeof v==="function"){this.__stash.push(this.lastOp=v.apply(this,[saved,...args]))}else{this.__stash.push(this.lastOp=v)}return this},save:function(v,...args){return this.stash(v,...args)},stashPop:function(v,...args){if(typeof v==="function"){return this.lastOp=v.apply(this,[this.__stash.pop(),...args])}return this.lastOp=this.__stash.pop()},recall:function(v,...args){return this.stashPop(v,...args)},animate:function(oKeyframes,opts=1e3){const sel=this.selected;if(sel.__animation__&&!["finished","idle"].includes(sel?.__currentAnimation__?.playState)){this.lastOp=sel.__animation__=sel.__animation__.then(()=>{if(sel.__currentAnimation__.__cancelled__){throw new DOMException("Animation cancelled.","AbortError")}return(sel.__currentAnimation__=sel.animate(oKeyframes,opts)).finished})}else{this.lastOp=sel.__animation__=(sel.__currentAnimation__=sel.animate(oKeyframes,opts)).finished.catch(()=>{})}return this},cancelAnimate:function(){let currAnim=this.selected?.__currentAnimation__;if(currAnim){(this.lastOp=currAnim).cancel();currAnim.__cancelled__=true}return this},await:function(promise,cb){this.lastOp=promise.then(cb.bind(this));return this}});function addTouchCapture(namespace){return function(){ch(window).on("touchstart@"+namespace,function(evt){const el=evt.currentTarget;el._touchStarted=true;clearTimeout(el._touchStartTimeout);el._touchStartTimeout=setTimeout(function(){el._touchStarted=false},750)})}}const contentExceptions={close:"rotate(45deg)"};function magnify(that,def){if(that._magnify!==undefined&&!that._magnify){return}var exception=contentExceptions[that.dataset.name],exceptionMS,exceptionDef;exception?(exceptionDef=" "+exception+" ",exceptionMS=" -ms-"+exception+" "):(exceptionDef=" ",exceptionMS=" ");def===undefined||def?(that.style.transform="-ms-translate(0%,-50%)"+exceptionMS+"-ms-scale(2,2)",that.style.transform="translate(0%,-50%)"+exceptionDef+"scale(2,2)"):(that.style.transform="-ms-translate(0%,-50%)"+exceptionMS+"-ms-scale(1,1)",that.style.transform="translate(0%,-50%)"+exceptionDef+"scale(1,1)")}function isTouchOrEmulationIsBoundary(container,node,event,thresholdX,thresholdY){thresholdX=thresholdX||10;thresholdY=thresholdY||10;var rect=node.getBoundingClientRect(),rectMidX=(rect.left+rect.right)/2,rectMidY=(rect.top+rect.bottom)/2,x=event.clientX,y=event.clientY,dX=rect.width/2-Math.abs(rectMidX-x),dY=rect.height/2-Math.abs(rectMidY-y);return node._touchStarted||container._touchStarted&&(dX<thresholdX||dY<thresholdY)}function showMore(that,show,e){var pNode=that.parentNode,mNode;if(!pNode._more||e?.type==="mouseout"&&pNode!==e.relatedTarget&&pNode.contains(e.relatedTarget)){return}if(!show){clearTimeout(pNode._moreTimeout);pNode._moreNode&&(pNode._moreNode.style.opacity=0);pNode._moreTimeout=setTimeout(function(){pNode._moreNode&&pNode.removeChild(pNode._moreNode);pNode._moreNode=undefined},1e3);return}mNode=pNode._moreNode?pNode._moreNode:pNode._moreNode=ch(pNode).crt("div").pipe("sappend").satr("class","showmore").set("textContent",pNode._more).crt("div").pipe("sappend").up().addClass("bottom").selected;clearTimeout(pNode._moreTimeout);pNode._moreTimeout=setTimeout(function(){mNode.style.opacity=.9;pNode._moreTimeout=setTimeout(function(){showMore(that,false)},3e3)},250)}function addMenu(modal,layout,eventMap){ch`
    -> ${modal}
    $> ${Object.getOwnPropertyNames(layout).map(d=>layout[d]).sort((a,b)=>a.order-b.order)}
    *> ${({values})=>values[1].map(d=>"div")} |> append ${0}
    &> ${({values})=>(div,i)=>ch(div)`
      addClass ${values[1][i].name}
      $> ${Object.getOwnPropertyNames(values[1][i].items).map((dd,ii)=>values[1][i].items[dd]).sort((a,b)=>a.order-b.order)}
      *> ${({values})=>values[1].map(d=>"div")} |> append ${0}
      &> ${({values:_v,thisArg:ch})=>(div,i)=>{ch(div).set("_more",_v[1][i].more).exec(data=>data.classes&&ch.addClass(data.classes.split(" ").filter(d=>d)),_v[1][i]).crt("span").pipe("sappend").set("textContent",_v[1][i].utf).satr("custom-cursor",_v[1][i].cursor).satr("data-name",_v[1][i].name).set("_magnify",_v[1][i].magnify).on("mouseover",function(evt){evt.stopPropagation();let span=evt.currentTarget;if(isTouchOrEmulationIsBoundary(window,span,evt)){span._touchStarted=false;return}magnify(span);showMore(span,true,evt);_v[1][i].toggleParentClass&&ch.addClass(_v[1][i].toggleParentClass,div)}).on("mouseout",function(evt){evt.stopPropagation();let span=evt.currentTarget;if(span._touchEnded){span._touchEnded=false;return}magnify(span,false);showMore(span,false,evt);_v[1][i].toggleParentClass&&ch.rmClass(_v[1][i].toggleParentClass,div)}).on("mousedown",function(evt){evt.stopPropagation();evt.preventDefault();let span=evt.currentTarget;if(isTouchOrEmulationIsBoundary(window,span,evt)){span._touchStarted=false;return}if(!modal._active){_v[1][i].action(modal,span,evt,eventMap)}}).on("touchstart",function(evt){let span=evt.currentTarget;span._touchStarted=true;magnify(span);showMore(span,true,evt);_v[1][i].toggleParentClass&&ch.addClass(_v[1][i].toggleParentClass,div);if(!modal._active){_v[1][i].action(modal,span,evt,eventMap)}}).on("touchend",function(evt){evt.preventDefault();let span=evt.currentTarget;span._touchEnded=true;magnify(span,false);showMore(span,false,evt);_v[1][i].toggleParentClass&&ch.rmClass(_v[1][i].toggleParentClass,div)})}}
      `}
    `}const docBody=document.body,docEl=document.documentElement;var setWidth=(modal,w)=>modal.__width=w;function addResizeRegulator(namespace){return function(modal,eventMap){var busy=false;ch(window).on("resize@"+namespace,function(event){if(busy){return}busy=true;window.requestAnimationFrame(function(){var clW=docEl.clientWidth||window.innerWidth,clH=Math.max(docEl.clientHeight,window.innerHeight),rect=modal.getBoundingClientRect(),width=setWidth(modal,rect.width),height=rect.height,top=rect.top,left=rect.left;ch(modal).style("top",Math.floor(Math.max(0,Math.min(top,clH-height)))+"px").style("left",Math.floor(Math.max(0,Math.min(left,clW-width)))+"px");eventMap.get("__onWindowResize")?.(modal,event);busy=false})})}}const windowTop=function(){var busy=false,cache=null,refresh=function(){busy=false};return function(){if(busy){return cache}busy=true;window.requestAnimationFrame(refresh);return cache=Math.max(docBody.scrollTop,docEl.scrollTop)}}();function addScrollWatcher(namespace){return function(modal,hide=()=>0){let busy=false,scrollPrev,scrollNow;ch(window).on("scroll@"+namespace,function(){if(busy){return}busy=true;window.requestAnimationFrame(function(){scrollPrev=scrollNow;var rect=modal.getBoundingClientRect();scrollNow=windowTop();if(hide({modal:modal,node:modal,rect:rect,scrollPrev:scrollPrev,scrollNow:scrollNow})){ch(modal).style("opacity",0).style("visibility","hidden")}else{ch(modal).style("opacity",.8).style("visibility","visible")}busy=false})})}}function fCLOSE(namespace){return function(modal,eTarget,e,eventMap){ch(window).off("@"+namespace);modal._refResetPan&&modal._refResetPan();modal._refResetResize&&modal._refResetResize();modal.parentNode.removeChild(modal);eventMap.get("__onClose")?.(modal,e);eventMap.clear()}}function pan(modal,clW,clH,width,height,oX,oY,e){e.preventDefault();if(this._busy){return}var x=e?.clientX??e.targetTouches[0].clientX,y=e?.clientY??e.targetTouches[0].clientY,that=this;this._busy=true;window.requestAnimationFrame(function(){ch(modal).style("left",function(){return Math.floor(Math.max(0,Math.min(x-oX,clW-width)))+"px"}).style("top",function(){return Math.floor(Math.max(0,Math.min(y-oY,clH-height)))+"px"});that._busy=false})}const quirks={passiveSupported:false};(function(){var options=Object.defineProperty({},"passive",{get:function(){quirks.passiveSupported=true}});window.addEventListener("passiveSupportedTest",null,options)})();const genHexStr=function(){const ceil=Math.ceil,log=Math.log,min=Math.min,rand=Math.random,log10b16=log(10)/log(16),maxPow10=Math.log(Number.MAX_SAFE_INTEGER)/Math.log(10)|0;return function genHexStr(complexity=6,reps=2,prefix="",postfix=""){let padding="0".repeat(ceil(complexity*log10b16)),ceiling=10**min(maxPow10,complexity);return prefix+Array.from({length:reps},d=>(padding+(+(rand()*ceiling).toFixed(0)).toString(16)).slice(-padding.length)).join("").replace(/^0/,"f")+postfix}}(),outerBarcode=genHexStr(8,2,"modal-comp-");function disableScroll(disable){const ns="disable-scroll-"+outerBarcode;if(disable){ch(docBody).addClass("lock-scroll")(docEl).addClass("lock-scroll");if(!document[ns]){document[ns]=function(event){event.cancelable&&event.preventDefault()}}ch(docBody).on("touchmove",document[ns],quirks.passiveSupported?{capture:false,passive:false}:false)}else{ch(docBody).rmClass("lock-scroll").off("touchmove",document[ns],quirks.passiveSupported?{capture:false,passive:false}:false)(docEl).rmClass("lock-scroll")}}function fPAN(modal,eTarget,e,eventMap){ch(eTarget).addClass("active");var clW=docEl.clientWidth||window.innerWidth,clH=Math.max(docEl.clientHeight,window.innerHeight),x=e?.clientX??e.targetTouches[0].clientX,y=e?.clientY??e.targetTouches[0].clientY,rect=modal.getBoundingClientRect(),width=rect.width,height=rect.height,oX=x-rect.left,oY=y-rect.top,refMove=pan.bind(modal,modal,clW,clH,width,height,oX,oY),refReset=modal._refResetPan=function(event){ch(eTarget).rmClass("active")(docEl).rmClass("panning")(modal).set("_active",false).rmClass("panning")(window).off("resize",refReset,false).off("mouseup",refReset,false).off("touchend",refReset,false).off("touchmove",refMove,false).off("mousemove",refMove,false);disableScroll(false);event&&eventMap.get("__onPanEnd")?.(modal,event)};disableScroll(true);ch(modal).set("_active",true).addClass("panning")(docEl).addClass("panning")(window).on("resize",refReset,false).on("mouseup",refReset,false).on("touchend",refReset,false);if(e.type==="touchstart"){e.preventDefault();ch.on("touchmove",refMove,quirks.passiveSupported?{capture:false,passive:false}:false)}else{ch.on("mousemove",refMove,false)}}function resize(modal,clW,clH,left,top,oX,oY,bot,e){e.preventDefault();if(this._busy){return}var x=e?.clientX??e.targetTouches[0].clientX,y=e?.clientY??e.targetTouches[0].clientY,that=this,w=Math.floor(Math.max(0,Math.min(x-left-oX,clW-left))),h=Math.floor(Math.max(0,Math.min(bot-y+oY,bot)));this._busy=true;window.requestAnimationFrame(function(){ch(modal).style("width",function(){return setWidth(modal,w)+"px"}).style("height",function(){return h+"px"}).style("top",function(){return Math.floor(Math.max(Math.max(bot-clH*.9,0),Math.min(y-oY,bot-clH*.1)))+"px"}).style("font-size",function(){return Math.max(10,Math.min(48,Math.min(w,h)/750*30))+"px"});that._busy=false})}function fRESIZE(modal,eTarget,e,eventMap){ch(eTarget).addClass("active");var clW=docEl.clientWidth||window.innerWidth,clH=Math.max(docEl.clientHeight,window.innerHeight),x=e?.clientX??e.targetTouches[0].clientX,y=e?.clientY??e.targetTouches[0].clientY,rect=modal.getBoundingClientRect(),left=rect.left,top=rect.top,oX=x-rect.right,oY=y-top,bot=rect.bottom,refMove=resize.bind(modal,modal,clW,clH,left,top,oX,oY,bot),refReset=modal._refResetResize=function(event){ch(eTarget).rmClass("active")(docEl).rmClass("resizing")(modal).set("_active",false).rmClass("resizing")(window).off("resize",refReset,false).off("mouseup",refReset,false).off("touchend",refReset,false).off("touchmove",refMove,false).off("mousemove",refMove,false);disableScroll(false);event&&eventMap.get("__onResizeEnd")?.(modal,event)};disableScroll(true);ch(modal).set("_active",true).addClass("resizing")(docEl).addClass("resizing")(window).on("resize",refReset,false).on("mouseup",refReset,false).on("touchend",refReset,false);if(e.type==="touchstart"){e.preventDefault();ch.on("touchmove",refMove,quirks.passiveSupported?{capture:false,passive:false}:false)}else{ch.on("mousemove",refMove,false)}}function StyleGen(){return["@font-face {","    font-family: material;","    src: url('data:font/woff;charset=utf-8;base64,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') format('woff');","    font-weight: normal;","    font-style: normal;","    font-display: block;","}",".lock-scroll {","    overflow:hidden;","}",`.${outerBarcode} {`,"    position: fixed;","    box-sizing: border-box;","    display: block;","    margin: 0px;","    padding: 0px;","    border-radius:5px;","    opacity: 0;","    transform:scale(0.1,0.1);","    transition:transform 1s ease, opacity 1s ease, visibility 1s ease;","    overflow:hidden;","    min-width:200px;","    min-height:100px;","    z-index:2;","    cursor:pointer;","    -webkit-user-select: none;","    -moz-user-select: none;","    -ms-user-select: none;","    user-select: none;","    -webkit-tap-highlight-color: rgba(0,0,0,0);","    max-width:90%;","    max-height:90%;","    min-width:10%;","    min-height:10%;","}",`.${outerBarcode}.white {`,"    border: 2px solid Gray;","    background-color: White;","}",`.${outerBarcode}.black {`,"    border-width: 0px;","    background-color: Black;","}",`.${outerBarcode}.white, .${outerBarcode}.black {`,"    opacity:0.8;","    transform:scale(1,1);","}","/*\x3c!--menu--\x3e*/",`.${outerBarcode} > .menu {`,"    font-family:material;","    position:absolute;","    top:0;","    right:0;","    height:5%;","    margin:0px;","    padding:0px;","    z-index:4;","}",`.${outerBarcode} > .menu>div {`,"    float:right;","    height:100%;","    margin:0px;","    padding:0px;","}",`.${outerBarcode} > .menu>div span {`,"    display:inline-block;","    position:relative;","    top:50%;","    transform:translate(0%,-50%);","    transition:transform 0.3s ease;","    margin:5px;","    color:white;","    -webkit-user-select: none;","    -moz-user-select: none;","    -ms-user-select: none;","    user-select: none;","}",`.${outerBarcode} > .menu>div span[custom-cursor*="pan"] {`,`    cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='36px' height='36px'%3E%5Cn%5Ct%3Csymbol id='cursors-pan' viewBox='0 0 24 24'%3E%5Cn%5Ct%5Ct%3Ctitle%3Epan_tool%3C/title%3E%5Cn%5Ct%5Ct%3Cpath d='M23.016 5.484v14.531c0 2.203-1.828 3.984-4.031 3.984h-7.266c-1.078 0-2.109-0.422-2.859-1.172l-7.875-8.016s1.266-1.219 1.313-1.219c0.234-0.188 0.516-0.281 0.797-0.281 0.234 0 0.422 0.047 0.609 0.141 0.047 0 4.313 2.438 4.313 2.438v-11.906c0-0.844 0.656-1.5 1.5-1.5s1.5 0.656 1.5 1.5v7.031h0.984v-9.516c0-0.844 0.656-1.5 1.5-1.5s1.5 0.656 1.5 1.5v9.516h0.984v-8.531c0-0.844 0.656-1.5 1.5-1.5s1.5 0.656 1.5 1.5v8.531h1.031v-5.531c0-0.844 0.656-1.5 1.5-1.5s1.5 0.656 1.5 1.5z' fill='LightGray' fill-opacity='0.9'/%3E%5Cn%5Ct%3C/symbol%3E%5Cn%5Ct%3Cuse xlink:href='%23cursors-pan'%3E%5Cn%5Ct%3C/use%3E%5Cn%3C/svg%3E"), move;`,"}",`.${outerBarcode} > .menu>div span[custom-cursor*="pan"].active, .${outerBarcode}.panning ,:root.panning {`,`    cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='36px' height='42px'%3E%5Cn%5Ct%3Csymbol id='cursors-icon-hand-grab-o' viewBox='0 0 24 28'%3E%5Cn%5Ct%5Ct%3Ctitle%3Ehand-grab-o%3C/title%3E%5Cn%5Ct%5Ct%3Cpath d='M12 6c-1.109 0-2 0.891-2 2v2h-0.5v-1.453c0-0.984-0.75-1.797-1.75-1.797-0.969 0-1.75 0.781-1.75 1.75v6.703l-0.5-0.469v-2.688c0-0.984-0.75-1.797-1.75-1.797-0.969 0-1.75 0.781-1.75 1.75v3.5c0 0.484 0.203 0.938 0.547 1.281l4.844 4.625c0.453 0.453 0.609 0.969 0.609 1.594 0 0.547 0.453 1 1 1h10c0.547 0 1-0.453 1-1v-0.391c0-0.406 0.047-0.812 0.156-1.203l1.687-6.813c0.109-0.391 0.156-0.797 0.156-1.203v-3.844c0-0.984-0.75-1.797-1.75-1.797-0.969 0-1.75 0.781-1.75 1.75v0.5h-0.5v-1.953c0-0.828-0.562-1.594-1.391-1.766-0.109-0.016-0.234-0.031-0.359-0.031-0.969 0-1.75 0.781-1.75 1.75v2h-0.5v-1.906c0-1.047-0.75-1.969-1.797-2.078-0.078-0.016-0.141-0.016-0.203-0.016zM12 4c0.844 0 1.656 0.266 2.328 0.781 0.578-0.344 1.25-0.531 1.922-0.531 1.234 0 2.375 0.594 3.078 1.609 0.297-0.078 0.609-0.109 0.922-0.109 2.094 0 3.75 1.719 3.75 3.797v3.844c0 0.562-0.078 1.141-0.203 1.687l-1.703 6.813c-0.094 0.375-0.094 0.734-0.094 1.109 0 1.656-1.344 3-3 3h-10c-1.781 0-3-1.422-3-3.141l-4.813-4.625c-0.734-0.703-1.188-1.703-1.188-2.734v-3.5c0-2.063 1.687-3.75 3.75-3.75 0.094 0 0.172 0 0.25 0.016 0.125-1.984 1.781-3.516 3.75-3.516 0.531 0 1.047 0.109 1.531 0.328 0.734-0.703 1.703-1.078 2.719-1.078z' fill='LightGray' fill-opacity='0.9'/%3E%5Cn%5Ct%3C/symbol%3E%5Cn%5Ct%3Cuse xlink:href='%23cursors-icon-hand-grab-o'%3E%5Cn%5Ct%3C/use%3E%5Cn%3C/svg%3E"), move;`,"}",`.${outerBarcode} > .menu>div span[custom-cursor*="resize"], .${outerBarcode}.resizing, :root.resizing {`,`    cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='36px' height='36px'%3E%5Cn%5Ct%3Csymbol id='cursors-icon-two-fingers-resize-out' viewBox='0 0 32 32'%3E%5Cn%5Ct%5Ct%3Ctitle%3Etwo-fingers-resize-out%3C/title%3E%5Cn%5Ct%5Ct%3Cpath d='M6.179 7.179l0.707 0.707-4.113 4.113h3.227v1h-5v-5h1v3.359l4.179-4.179zM7.821 6.821l-0.707-0.707 4.113-4.113h-3.227v-1h5v5h-1v-3.359l-4.179 4.179zM31 23.5v-5.986c0-1.381-1.11-2.5-2.5-2.5-0.563 0-1.082 0.184-1.5 0.497v-0.013c0-1.379-1.11-2.498-2.5-2.498-0.563 0-1.082 0.187-1.5 0.502v-6.999c0-1.383-1.11-2.503-2.5-2.503-1.073 0-1.988 0.675-2.343 1.627-0.44-0.39-1.019-0.627-1.657-0.627-1.381 0-2.5 1.115-2.5 2.508v8.858c-1.955-1.829-4.187-3.192-5.609-1.771-1.987 1.987 2.186 5.887 5.45 11.832 2.261 4.119 5.546 5.572 8.659 5.572 4.694 0 8.5-3.806 8.5-8.5zM22.5 31c-3.76-0-5.99-2.051-7.753-5.017-3.912-6.582-6.713-9.594-5.626-10.687 1.111-1.117 3.821 1.302 5.879 3.503v-11.293c0-0.838 0.672-1.505 1.5-1.505 0.834 0 1.5 0.674 1.5 1.505v10.495h1v-11.509c0-0.815 0.672-1.491 1.5-1.491 0.834 0 1.5 0.668 1.5 1.491v10.509h1v-1.494c0-0.835 0.672-1.506 1.5-1.506 0.834 0 1.5 0.674 1.5 1.506v2.494h1v-0.498c0-0.831 0.672-1.502 1.5-1.502 0.834 0 1.5 0.672 1.5 1.502v5.998c0 4.142-3.358 7.5-7.5 7.5v0 0z' fill='LightGray' fill-opacity='0.9'/%3E%5Cn%5Ct%3C/symbol%3E%5Cn%5Ct%3Cuse xlink:href='%23cursors-icon-two-fingers-resize-out'%3E%5Cn%5Ct%3C/use%3E%5Cn%3C/svg%3E"), nesw-resize;`,"}",`.${outerBarcode} > .menu>div span[custom-cursor*="help"] {`,`    cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='36px' height='36px'%3E%5Cn%5Ct%3Csymbol id='cursors-icon-help' viewBox='0 0 24 24'%3E%5Cn%5Ct%5Ct%3Ctitle%3Ehelp%3C/title%3E%5Cn%5Ct%5Ct%3Cpath d='M15.047 11.25c0.563-0.563 0.938-1.359 0.938-2.25 0-2.203-1.781-3.984-3.984-3.984s-3.984 1.781-3.984 3.984h1.969c0-1.078 0.938-2.016 2.016-2.016s2.016 0.938 2.016 2.016c0 0.563-0.234 1.031-0.609 1.406l-1.219 1.266c-0.703 0.75-1.172 1.734-1.172 2.813v0.516h1.969c0-1.5 0.469-2.063 1.172-2.813zM12.984 18.984v-1.969h-1.969v1.969h1.969zM12 2.016c5.531 0 9.984 4.453 9.984 9.984s-4.453 9.984-9.984 9.984-9.984-4.453-9.984-9.984 4.453-9.984 9.984-9.984z' fill='LightGray' fill-opacity='0.9'/%3E%5Cn%5Ct%3C/symbol%3E%5Cn%5Ct%3Cuse xlink:href='%23cursors-icon-help'%3E%5Cn%5Ct%3C/use%3E%5Cn%3C/svg%3E"), help;`,"}",`.${outerBarcode} > .menu>div span[data-name*="close"] {`,"    transform: translate(0%,-50%) rotate(45deg);","}","/*\x3c!--menu--\x3e*/","/*\x3c!--contentBody added by addContentBody function--\x3e*/",`.${outerBarcode} > .contentBody {`,"    position:absolute;","    top:5%;","    left:5%;","    width:90%;","    height:90%;","    margin:0px;","    padding:0px;","}","/*\x3c!--contentBody added by addContentBody function--\x3e*/",`.${outerBarcode} * {`,"    box-sizing: border-box;","}"].filter(d=>d).join("\n")}var eventMapGen=modal=>{const eventMap=new Map([["__onPanEnd",null],["__onResizeEnd",null],["__onWindowResize",null],["__onClose",null]]);eventMap.forEach((v,k)=>{modal[k]=function(f){if(typeof f!=="function"){throw new TypeError("Argument is not a function")}eventMap.set(k,f);return modal}});return eventMap};function modalComponent({container=document.body,cls,atr,sty,help,hide=()=>0,spotlight=false}={}){if(!defaultStyleApplied){let style=document.createElement("style");style.textContent=StyleGen();style.setAttribute("data-name",outerBarcode);document.head.appendChild(style);setDefaultStyleApplied(true)}let innerBarcode=genHexStr(8,2,"modal-comp-"),clH=docEl.clientHeight||window.innerHeight,clW=docEl.clientWidth||window.innerWidth,w=clW<1e3?.75*clW:.4*clW,h=.8*clH,fontSize=Math.max(14,Math.min(48,Math.min(w,h)/750*30));const layout={menu:{name:"menu",order:1,items:{close:{order:1,utf:"",action:fCLOSE(innerBarcode),cursor:"inherit",name:"close"},resize:{order:2,utf:"",action:fRESIZE,cursor:"resize",name:"resize"},pan:{order:3,utf:"",action:fPAN,cursor:"pan",name:"pan"}}}};if(help){layout.menu.items.help={order:0,utf:"",action:help,cursor:"help",name:"help"}}const modal=ch(container).crt("div").pipe("sappend").style([["width",w+"px"],["height",h+"px"],["font-size",fontSize+"px"],["top",.1*clH+"px"]]).addClass(outerBarcode).animate([],{duration:300,delay:0}).pipe("await",function(){this(modal).addClass("black").exec(function(){cls&&this.addClass(cls);atr&&this.satr(atr);sty&&this.style(sty)})}).selected,eventMap=eventMapGen(modal);setWidth(modal,w);addTouchCapture(innerBarcode)();addMenu(modal,layout,eventMap);addResizeRegulator(innerBarcode)(modal,eventMap);addScrollWatcher(innerBarcode)(modal,hide);return modal}modalComponent.className=outerBarcode;return modalComponent});